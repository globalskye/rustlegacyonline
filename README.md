# Rust Legacy Server Website v2.0 üéÆ

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –≤–µ–±-—Å–∞–π—Ç –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞ Rust Legacy —Å **–±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö PostgreSQL**, –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–≤—É—Ö —è–∑—ã–∫–æ–≤ (—Ä—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π), REST API –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º.

## üöÄ –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ v2.0

### ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- **PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **REST API** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏
- **–°–∏—Å—Ç–µ–º–∞ –Ω–æ–≤–æ—Å—Ç–µ–π** —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- **–†–∞—Å—à–∏—Ä—è–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è** —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### üóÑÔ∏è –ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –º–∞–∫—Å. –∏–≥—Ä–æ–∫–æ–≤, –≤–µ—Ä—Å–∏—è, —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ)
- –û–ø–∏—Å–∞–Ω–∏—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö
- –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞ (features)
- –ù–æ–≤–æ—Å—Ç–∏ —Å –¥–∞—Ç–∞–º–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- –î–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–æ–≤ (–¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
rustlegacyonline/
‚îú‚îÄ‚îÄ backend/                 # Go API —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ handlers/          # HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (–ø–æ –¥–æ–º–µ–Ω–∞–º)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ serverinfo.go, features.go, news.go, shop.go, ...
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ health.go
‚îÇ   ‚îú‚îÄ‚îÄ routes/            # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ models/            # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (GORM)
‚îÇ   ‚îú‚îÄ‚îÄ database/          # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –º–∏–≥—Ä–∞—Ü–∏–∏, seed
‚îÇ   ‚îú‚îÄ‚îÄ pkg/gameserver/    # Source engine A2S_INFO query
‚îÇ   ‚îî‚îÄ‚îÄ main.go
‚îú‚îÄ‚îÄ frontend/               # React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ       ‚îú‚îÄ‚îÄ services/      # API –∫–ª–∏–µ–Ω—Ç
‚îÇ       ‚îú‚îÄ‚îÄ components/    # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ       ‚îî‚îÄ‚îÄ i18n/         # –ü–µ—Ä–µ–≤–æ–¥—ã
‚îú‚îÄ‚îÄ deploy/                 # Production deployment
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.production.yml
‚îÇ   ‚îî‚îÄ‚îÄ DEPLOY.md          # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ rustlegacy.online
‚îî‚îÄ‚îÄ docker-compose.yml     # –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```

## üìä API Endpoints

### Server Info
- `GET /api/server-info` - –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ—Ä–≤–µ—Ä–µ
- `PUT /api/server-info` - –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

### Features
- `GET /api/features?lang=ru` - –ü–æ–ª—É—á–∏—Ç—å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
- `POST /api/features` - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å
- `PUT /api/features/{id}` - –û–±–Ω–æ–≤–∏—Ç—å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å
- `DELETE /api/features/{id}` - –£–¥–∞–ª–∏—Ç—å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å

### News
- `GET /api/news?lang=ru&published=true` - –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤–æ—Å—Ç–∏
- `GET /api/news/{id}` - –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –Ω–æ–≤–æ—Å—Ç—å
- `POST /api/news` - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å
- `PUT /api/news/{id}` - –û–±–Ω–æ–≤–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å
- `DELETE /api/news/{id}` - –£–¥–∞–ª–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å

### Players
- `GET /api/players?online=true` - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤
- `GET /api/players/{steamid}` - –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞

### Health
- `GET /api/health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã (PostgreSQL + Backend + Frontend)
docker-compose up --build

# –°–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:3000
# API –Ω–∞ http://localhost:8080
# PostgreSQL –Ω–∞ localhost:5432
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

#### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL

```bash
docker run --name rust-postgres \
  -e POSTGRES_DB=rustlegacy \
  -e POSTGRES_USER=rustlegacy \
  -e POSTGRES_PASSWORD=rustlegacy_password \
  -p 5432:5432 \
  -d postgres:15-alpine
```

#### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Backend

```bash
cd backend
go mod download
go run main.go
```

#### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Frontend

```bash
cd frontend
npm install
npm start
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏

```bash
curl -X POST http://localhost:8080/api/news \
  -H "Content-Type: application/json" \
  -d '{
    "language": "ru",
    "title": "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞",
    "content": "–°–µ–≥–æ–¥–Ω—è –º—ã –¥–æ–±–∞–≤–∏–ª–∏ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏!",
    "published": true,
    "publishedAt": "2025-01-27T12:00:00Z"
  }'
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ—Ä–≤–µ—Ä–µ

```bash
curl -X PUT http://localhost:8080/api/server-info \
  -H "Content-Type: application/json" \
  -d '{
    "id": 1,
    "name": "My Rust Legacy Server",
    "maxPlayers": 150,
    "gameVersion": "Legacy",
    "downloadUrl": "https://mysite.com/download"
  }'
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

```bash
curl -X POST http://localhost:8080/api/features \
  -H "Content-Type: application/json" \
  -d '{
    "serverInfoId": 1,
    "language": "ru",
    "title": "–ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã",
    "description": "–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –≥–µ–π–º–ø–ª–µ—è",
    "icon": "zap",
    "order": 5
  }'
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤–æ–π —Å—Ö–µ–º—ã

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `frontend/src/App.css`:

```css
:root {
  --rust-orange: #d4532f;
  --rust-dark: #1a1612;
  /* ... –¥—Ä—É–≥–∏–µ —Ü–≤–µ—Ç–∞ */
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—è –≤ –º–æ–¥–µ–ª—å

1. –û–±–Ω–æ–≤–∏—Ç–µ –º–æ–¥–µ–ª—å –≤ `backend/models/models.go`
2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∏–≥—Ä–∏—Ä—É–µ—Ç –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

Backend –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
PORT=8080
DB_HOST=postgres
DB_PORT=5432
DB_USER=rustlegacy
DB_PASSWORD=rustlegacy_password
DB_NAME=rustlegacy
```

Frontend:
```env
REACT_APP_API_URL=http://localhost:8080/api
```

## üì¶ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞ PostgreSQL

**ServerInfo** - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ
**Description** - –ü–µ—Ä–µ–≤–æ–¥—ã –æ–ø–∏—Å–∞–Ω–∏–π
**Feature** - –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
**News** - –ù–æ–≤–æ—Å—Ç–∏
**Player** - –î–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–æ–≤
**Setting** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î

```bash
# –ß–µ—Ä–µ–∑ Docker
docker exec -it rust-legacy-postgres psql -U rustlegacy -d rustlegacy

# –õ–æ–∫–∞–ª—å–Ω–æ
psql -h localhost -U rustlegacy -d rustlegacy
```

### –ü–æ–ª–µ–∑–Ω—ã–µ SQL –∫–æ–º–∞–Ω–¥—ã

```sql
-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –Ω–æ–≤–æ—Å—Ç–∏
SELECT * FROM news;

-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
SELECT * FROM features WHERE language = 'ru';

-- –û–±–Ω–æ–≤–∏—Ç—å –º–∞–∫—Å. –∏–≥—Ä–æ–∫–æ–≤
UPDATE server_infos SET max_players = 200 WHERE id = 1;
```

## üéØ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π API endpoint

1. –°–æ–∑–¥–∞–π—Ç–µ handler –≤ `backend/handlers/handlers.go`
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ route –≤ `backend/main.go`
3. –î–æ–±–∞–≤—å—Ç–µ –º–µ—Ç–æ–¥ –≤ `frontend/src/services/api.ts`

### –ü—Ä–∏–º–µ—Ä: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

```go
// backend/models/models.go
type Achievement struct {
    ID          uint      `gorm:"primaryKey"`
    Name        string
    Description string
    Icon        string
    Points      int
    CreatedAt   time.Time
}

// backend/handlers/handlers.go
func GetAchievements(w http.ResponseWriter, r *http.Request) {
    var achievements []models.Achievement
    database.DB.Find(&achievements)
    json.NewEncoder(w).Encode(achievements)
}

// backend/main.go
api.HandleFunc("/achievements", handlers.GetAchievements).Methods("GET")
```

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **Go 1.21** - –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **GORM** - ORM –¥–ª—è PostgreSQL
- **Gorilla Mux** - HTTP —Ä–æ—É—Ç–µ—Ä
- **PostgreSQL 15** - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### Frontend
- **React 18** - UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **TypeScript** - –¢–∏–ø–∏–∑–∞—Ü–∏—è
- **Framer Motion** - –ê–Ω–∏–º–∞—Ü–∏–∏
- **i18next** - –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å
- **Lucide React** - –ò–∫–æ–Ω–∫–∏

### DevOps
- **Docker** - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **Docker Compose** - –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
- **Nginx** - –í–µ–±-—Å–µ—Ä–≤–µ—Ä

## üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω

–°–∞–π—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è:
- üì± –ú–æ–±–∏–ª—å–Ω—ã—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ (320px+)
- üì± –ü–ª–∞–Ω—à–µ—Ç–æ–≤ (768px+)
- üíª –î–µ—Å–∫—Ç–æ–ø–æ–≤ (1024px+)
- üñ•Ô∏è –ë–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ (1920px+)

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
- –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –ë–î
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å HTTPS
- –î–æ–±–∞–≤–∏—Ç—å rate limiting
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤
- –î–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –õ–æ–≥–∏ backend
docker logs rust-legacy-backend -f

# –õ–æ–≥–∏ –ë–î
docker logs rust-legacy-postgres -f

# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose ps
```

## ü§ù –í–∫–ª–∞–¥ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ –¥–ª—è –ª–µ–≥–∫–æ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:
- –î–æ–±–∞–≤–ª—è–π—Ç–µ –Ω–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –≤ `models/`
- –î–æ–±–∞–≤–ª—è–π—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ `handlers/`
- –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ `components/`
- –†–∞—Å—à–∏—Ä—è–π—Ç–µ API –≤ `services/api.ts`

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

---

–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ Rust Legacy
